The goal of the key derivation function is to ensure work has been applied to a low-entropy source e.g. a password. We want to provide proof of both computation and more-so a proof of memory capacity since memory scales in a less parallel fashion than computing power.

The function builds an array of 'n' 64bit numbers and uses an extremely fast pseudo random number generator seeded with a hash of the password and salt as a data source for fill numbers.  We then xor mix the input with with entries in the array at random indicies a certain number of iterations in order to generate the output. The difficulty parameters are number of array entries and number of mix iterations.

The wallet kdf is tuned to use a 256mb derivation table and the block work function is tuned to use a 1mb derivation table.